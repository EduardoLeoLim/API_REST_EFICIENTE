const { Router } = require('express');
const path = Router();
var mysqlConnection = require('../../utils/conexion');
const keys = require('../../settings/keys');
const jwt = require('jsonwebtoken');

//Respuestas
const errorInterno = {
    "resBody" : {
    "menssage" : "error interno del servidor"
    }
}

const tokenInvalido = {
    "resBody" : {
    "menssage" : "token invalido"
    }
}

const peticionIncorrecta = {
    "resBody" : {
    "menssage" : "peticion no encontrada"
    }
}

const registroExitoso = {
    "resBody" : {
    "menssage" : "Registro exitoso"
    }
}

const actualizacionExitosa = {
    "resBody" : {
    "menssage" : "Actualización exitosa"
    }
}

//Función para verificar el token
function verifyToken(token){
    var statusCode = 0;
    try{
        const tokenData = jwt.verify(token, keys.key); 
        console.log(tokenData);
  
        if (tokenData["tipo"] == "Administrador") {
            statusCode = 200
            return statusCode
        }else{
            //Caso que un token exista pero no contenga los permisos para la petición
            statusCode = 401
            return statusCode
          }
    
        } catch (error) { //Caso de un token invalido, es decir que no exista
            statusCode = 401
            return statusCode
            
        }
}




module.exports = path;